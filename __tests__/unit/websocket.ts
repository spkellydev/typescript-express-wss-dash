import { Server } from "mock-socket";
import test from "ava";
// // let url: string;
// url = "ws://localhost:8080";
// const mockServer = new Server(url);

// jest.useFakeTimers();

// const msgs = [];

describe("Websockets", () => {
  // beforeEach(done => {
  //   mockServer.on("connection", (socket: Socket) => {
  //     socket.send("message");
  //   });
  // });
  // afterEach(() => {
  //   let closer: CloseOptions;
  //   closer = {
  //     code: 0,
  //     reason: "disconnected",
  //     wasClean: true
  //   };
  //   mockServer.close(closer);
  // });
  // const ws = new Socket(url);
  // ws.onmessage = async msg => {
  //   await msg;
  //   console.log(msg);
  //   msgs.push(msg);
  //   return msgs;
  // };
  // console.log(msgs);
  // jest.runOnlyPendingTimers();
  // done();
});
